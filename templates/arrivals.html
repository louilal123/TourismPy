{% extends 'base.html' %}
{% block content %}
<style>
  .highcharts-figure {
    width: 80vw ;
    height: 80vh;
    margin: auto;
}

#touristChart {
    width: 900px !important;
    height: 600px !important;
}

.highcharts-description {
    margin: 1rem auto;
    max-width: 700px;
    text-align: center;
    font-size: 1rem;
    color: #444;
    background: #f8f9fa;
    padding: 1rem;
    border-radius: 10px;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
}
</style>

<main class="container mx-auto px-4 sm:px-6 lg:px-8 py-16 h-full">
    <section class="mb-20 text-center max-w-5xl mx-auto pt-0">
        <div class="container mx-auto px-4 py-16">
            <h2 class="text-3xl md:text-5xl font-bold mb-8 text-blue-500 uppercase">Tourist Arrivals by Country</h2>

        

            <article class="bg-white p-8 rounded-lg shadow-lg transform transition-transform duration-300 hover:-translate-y-2">
                <div id="touristChart"></div> <!-- âœ… Highcharts container -->
            </article>
                <!-- ðŸ”¹ Informative Description -->
                <div class="highcharts-description">
                    <p>
                        This chart represents the **distribution of international tourists visiting the Philippines.
                        The data highlights the top countries that contribute to foreign tourist arrivals.
                        Understanding these trends helps in shaping tourism strategies and improving visitor experiences.
                    </p>
                </div>
        </div>
    </section>
</main>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script>
    // Get data from Flask
    const touristsByCountry = JSON.parse('{{ tourists_by_country | tojson | safe }}');

    // Convert dictionary to Highcharts pie chart format
    let pieData = Object.keys(touristsByCountry).map(country => ({
        name: country,
        y: touristsByCountry[country]
    }));

    // Initialize Highcharts Pie Chart
    Highcharts.chart('touristChart', {
        chart: { type: 'pie' },
        title: { text: 'Tourist Arrivals by Country' },
        tooltip: { pointFormat: '<b>{point.percentage:.1f}%</b>' },
        accessibility: {
            point: { valueSuffix: '%' }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.y} tourists'
                }
            }
        },
        series: [{
            name: 'Tourists',
            colorByPoint: true,
            data: pieData
        }]
    });
</script>

{% endblock %}
